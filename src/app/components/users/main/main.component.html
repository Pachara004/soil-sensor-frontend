<div class="container">
  <button (click)="logout()" class="logout-btn">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>

  <div class="card">
    <!-- ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏ö‡∏ô‡∏™‡∏∏‡∏î -->
    <img src="https://cdn.iconscout.com/icon/premium/png-256-thumb/soil-sensor-4449978-3688706.png"
         class="chip-icon" alt="chip" />

    <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ -->
    <div class="user-box">
      <span class="label">User : </span>
      <span class="value">{{ userID }}</span>
    </div>

    <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå -->
    <div class="device-box">
      <img src="https://cdn.iconscout.com/icon/premium/png-256-thumb/soil-sensor-4449978-3688706.png" class="chip-icon" alt="chip" />
      <span class="label-orange">‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå :</span>
      <span class="value" *ngIf="devices.length <= 1">{{ deviceName }}</span>
      <select class="device-select" *ngIf="devices.length > 1" [(ngModel)]="deviceName" (ngModelChange)="onDeviceChange()">
        <option *ngFor="let device of devices" [value]="device.name">{{ device.name }}</option>
      </select>
      <span class="status-indicator" [ngClass]="{'online': selectedDevice?.status === 'online', 'offline': selectedDevice?.status !== 'online'}">
        <span class="status-dot"></span>
        <span class="status-text">{{ selectedDevice?.status === 'online' ? 'Online' : 'Offline' }}</span>
      </span>
    </div>

     <div class="time-box">
      <span class="label">‡πÄ‡∏ß‡∏•‡∏≤ :</span>
      {{ currentTime }}
    </div>

    <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ -->
    <div class="user-icon" (click)="goToProfile()" style="cursor: pointer;">
      <img src="https://www.iconpacks.net/icons/2/free-user-icon-3296-thumb.png" alt="user" />
      <div class="text">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</div>
    </div>

    <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡∏Ñ‡πà‡∏≤ -->
    <button class="btn-history" (click)="goToHistory()">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡∏Ñ‡πà‡∏≤</button>

    <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏ß‡∏±‡∏î‡∏Ñ‡πà‡∏≤ -->
    <button class="btn-main" (click)="goToMeasure()">‡∏ß‡∏±‡∏î‡∏Ñ‡πà‡∏≤</button>

    <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô -->
    <div class="admin" (click)="goToContactAdmin()">
      <img src="https://cdn-icons-png.flaticon.com/512/9703/9703596.png" alt="admin" />
      <div>‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ Admin</div>
    </div>

    <!-- üî• NEW: ‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏° ‚Äú‡∏Ç‡∏≠‡∏ú‡∏π‡∏Å‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‚Äù -->
    <div class="claim-device-box">
    <div class="claim-title">‡∏Ç‡∏≠‡∏ú‡∏π‡∏Å‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</div>

      <div class="claim-row">
        <input
          class="claim-input"
          type="text"
          [(ngModel)]="claimDeviceId"
          (keyup.enter)="requestDeviceClaim()"
          placeholder="‡πÉ‡∏™‡πà Device ID ‡πÄ‡∏ä‡πà‡∏ô esp32-soil-01"
          aria-label="Device ID"
        />

        <button
          class="claim-btn"
          [disabled]="requestingClaim || !claimDeviceId.trim()"
          (click)="requestDeviceClaim()"
          aria-label="‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏ú‡∏π‡∏Å‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå"
        >
          <span *ngIf="!requestingClaim">‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠</span>
          <span *ngIf="requestingClaim" class="spinner"></span>
        </button>
      </div>

      <div class="claim-status" *ngIf="lastClaimMessage">
        <span
          class="status-dot"
          [ngClass]="{
            'ok': lastClaimType==='ok',
            'warn': lastClaimType==='warn',
            'err': lastClaimType==='err'
          }"
        ></span>
        {{ lastClaimMessage }}
      </div>
    </div>
  </div>
</div>
